import{d as _,j as h,k as E,h as V,l as w,a as l,b as e,e as r,i as m,f,t as n,u as t,w as x,R as F,g as N,F as M,o as u}from"./index-DIEM_Stt.js";import{c as C,a as D,u as I,F as R,E as U}from"./index.esm-jL68Z_VO.js";import{u as $}from"./usePosts-BjzDZpAO.js";import{_ as q}from"./LoadingBar.vue_vue_type_style_index_0_lang-D6vjh1aW.js";import"./index-xsH4HHeE.js";const L={key:0},j={key:1},O={key:2},T={class:"form-group"},z=["disabled"],W=_({__name:"PostEditByPatch",setup(A){const{isLoad:i,resultPatch:d,resultData:p,resultError:b,getSinglePost:g,updatePostByPatch:v}=$(),{params:c}=h(),a=E(null),P=C({body:D().min(10,"Minimum 10 characters").required("Body is required")}),{handleSubmit:k,setValues:B}=I({validationSchema:P,initialValues:{body:""}});V(async()=>{a.value=Number(c.id),await g(a.value)}),w(p,o=>{o&&B({body:o.body})});const y=k(async o=>{a.value!==null?(console.log("Updating post:",a.value,o),await v(a.value,o)):console.log("error in submition post:",a.value,o)});return(o,s)=>(u(),l(M,null,[e("h1",null,[f(" Update Post by Patch - (ID:"+n(t(c).id)+") ",1),r(t(F),{to:"/posts",class:"rightfloat"},{default:x(()=>s[1]||(s[1]=[f("Back")])),_:1})]),r(q,{status:t(i)},null,8,["status"]),t(b)?(u(),l("div",L,n(t(b)),1)):m("",!0),t(d)?(u(),l("div",j,[s[2]||(s[2]=e("p",null,"âœ… Successfully updated!",-1)),s[3]||(s[3]=e("br",null,null,-1)),e("pre",null,n(t(d)),1)])):m("",!0),t(p)&&!t(d)?(u(),l("div",O,[e("form",{onSubmit:s[0]||(s[0]=N((...S)=>t(y)&&t(y)(...S),["prevent"]))},[e("div",T,[s[4]||(s[4]=e("label",null,"Body",-1)),s[5]||(s[5]=e("br",null,null,-1)),r(t(R),{name:"body",as:"textarea",placeholder:"Enter body content",validateOnInput:""}),s[6]||(s[6]=e("br",null,null,-1)),r(t(U),{name:"body",class:"error"})]),e("button",{type:"submit",disabled:t(i)},n(t(i)?"Submitting...":"Update Post"),9,z)],32)])):m("",!0)],64))}});export{W as default};
