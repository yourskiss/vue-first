import{d as F,j as M,k as N,h as q,l as w,a,b as s,e as r,i as m,f as g,t as n,u as e,w as I,R as _,g as C,F as R,o as i}from"./index-DIEM_Stt.js";import{c as T,a as v,u as U,F as c,E as P}from"./index.esm-jL68Z_VO.js";import{u as $}from"./usePosts-BjzDZpAO.js";import{_ as D}from"./LoadingBar.vue_vue_type_style_index_0_lang-D6vjh1aW.js";import"./index-xsH4HHeE.js";const L={key:0},O={key:1},j={key:2},h={class:"form-group"},z={class:"form-group"},A=["disabled"],X=F({__name:"PostEditByPut",setup(G){const{isLoad:u,resultPost:d,resultData:p,resultError:b,getSinglePost:k,updatePostByPut:B}=$(),{params:f}=M(),o=N(null),S=T({title:v().min(3,"Minimum 3 characters").required("Title is required"),body:v().min(10,"Minimum 10 characters").required("Body is required")}),{handleSubmit:E,setValues:V}=U({validationSchema:S,initialValues:{title:"",body:""}});q(async()=>{o.value=Number(f.id),await k(o.value)}),w(p,l=>{l&&V({title:l.title,body:l.body})});const y=E(async l=>{o.value!==null?(console.log("Updating post:",o.value,l),await B(o.value,l)):console.log("error in submition post:",o.value,l)});return(l,t)=>(i(),a(R,null,[s("h1",null,[g(" Update Post by Put - (ID:"+n(e(f).id)+") ",1),r(e(_),{to:"/posts",class:"rightfloat"},{default:I(()=>t[1]||(t[1]=[g("Back")])),_:1})]),r(D,{status:e(u)},null,8,["status"]),e(b)?(i(),a("div",L,n(e(b)),1)):m("",!0),e(d)?(i(),a("div",O,[t[2]||(t[2]=s("p",null,"âœ… Successfully updated!",-1)),t[3]||(t[3]=s("br",null,null,-1)),s("pre",null,n(e(d)),1)])):m("",!0),e(p)&&!e(d)?(i(),a("div",j,[s("form",{onSubmit:t[0]||(t[0]=C((...x)=>e(y)&&e(y)(...x),["prevent"]))},[s("div",h,[t[4]||(t[4]=s("label",null,"Title",-1)),t[5]||(t[5]=s("br",null,null,-1)),r(e(c),{name:"title",as:"input",placeholder:"Enter title",validateOnInput:""}),t[6]||(t[6]=s("br",null,null,-1)),r(e(P),{name:"title",class:"error"})]),s("div",z,[t[7]||(t[7]=s("label",null,"Body",-1)),t[8]||(t[8]=s("br",null,null,-1)),r(e(c),{name:"body",as:"textarea",placeholder:"Enter body content",validateOnInput:""}),t[9]||(t[9]=s("br",null,null,-1)),r(e(P),{name:"body",class:"error"})]),s("button",{type:"submit",disabled:e(u)},n(e(u)?"Submitting...":"Update Post"),9,A)],32)])):m("",!0)],64))}});export{X as default};
